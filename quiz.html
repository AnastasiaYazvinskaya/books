<!DOCTYPE html>
<html>
	<head>
		<title>Тест</title>
		<link rel="icon" type="image/x-icon" href="images/icons/favicon.ico">

		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/quiz.css">
		<script type="text/javascript" src="js/dataBooks.js"></script>
		<script>
			window.onload = function() {
				var slider = document.getElementById("slider");
				var output = document.getElementById("age");
				output.innerHTML = slider.value;

				slider.oninput = function() {
				  	output.innerHTML = this.value;
				}

				for (var key in dataBooks.genres) {
					document.getElementById('genre').innerHTML += "<option value='"+key+"'>"+dataBooks.genres[key]+"</option>";
				}
			};

			function find() {
				document.getElementById('books-for-you').innerHTML = '';
				var age = document.getElementById('slider').value;
				var genre = document.getElementById('genre').value;
				//document.getElementById('books-for-you').innerHTML = age.value + " - " + genre.value;

				for (var key in dataBooks.books) {
					if (dataBooks.books[key].minAge <= age && dataBooks.books[key].genre.includes(genre)) {
						document.getElementById('books-for-you').innerHTML += "<a href='book.html?book="+ key +"' class='book clicked'><img src='images/"+ dataBooks.books[key].code +".jpg' alt='Обложка книги \""+ dataBooks.books[key].name +"\"'><h3>"+ dataBooks.books[key].name +"</h3><h4>"+ dataBooks.books[key].author +"</h4></a>";
					}
				}
			}
		</script>
	</head>
	<body>
		<nav>
			<ul>
				<a href="index.html">Книжная полка</a>
				<a href="gallery.html">Галерея</a>
				<a href="quiz.html">Опрос</a>
			</ul>
		</nav>
		<main>
			<h1>Найди подходящую тебе книгу</h1>
			<div id="quiz">
				<form>
					<p>Сколько тебе лет? <span id="age"></span> <input id="slider" type="range" min="1" max="100" value="16"><p>
					<p>Какой жанр вам нравиться? <select name="genre" id="genre">
						<option value="">Выбери жанр</option>
						<div id="option"></div>
					</select></p>
					<button type="button" onclick="find()">Найти книгу</button>
				</form>
			</div>
			<div id="books-for-you"></div>
		</main>
		<footer>
			<hr>
			<div>
				<p>&copy 2022 - Anastasia Yazvinskaya</p>
				<a href="#"><img id="github" src="images/icons/github-logo.png" alt="GitHub link"></a>
			</div>
		</footer>
	</body>
</html>